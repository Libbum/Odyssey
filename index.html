<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Iridescence</title>
        <link rel="stylesheet" href="iridescence.css">
        <script src="iridescence.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Lato|Mali" rel="stylesheet">
    </head>
    <body>
        <div id="iridescence"></div>
        <script>
            // Find browser's scrollbar width
            var scrollDiv = document.createElement("div");
            scrollDiv.className = "scrollbar-measure";
            document.body.appendChild(scrollDiv);
            var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;
            document.body.removeChild(scrollDiv)

            var app = Elm.Main.init({
                node: document.getElementById('iridescence'),
                flags: scrollbarWidth
            });

            window.onscroll = function(ev) {
                if ((window.innerHeight + window.pageYOffset + 500) >= document.body.offsetHeight) {
                    app.ports.nearBottom.send(true);
                }
            };
        </script>
    </body>
</html>
